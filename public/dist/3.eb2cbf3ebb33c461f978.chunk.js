webpackJsonp([3],{268:function(t,e,a){"use strict";function n(t){l||a(864)}Object.defineProperty(e,"__esModule",{value:!0});var o=a(866),r=a.n(o),i=a(873),s=a.n(i),l=!1,d=a(1),u=n,c=d(r.a,s.a,!1,u,null,null);c.options.__file="src\\views\\ad\\AdEdit.vue",c.esModule&&Object.keys(c.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),e.default=c.exports},312:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.deleteButton=function(t,e){return e("Poptip",{props:{confirm:!0,title:"您确定要删除这条数据吗?",transfer:!0},on:{"on-ok":function(){t()}}},[e("Button",{style:{margin:"0 5px"},props:{type:"error",placement:"top",size:"small",icon:"trash-a"}},"删除")])},e.detailsButton=function(t,e){return e("Button",{props:{type:"primary",icon:"ios-eye-outline",size:"small"},style:{marginRight:"5px"},on:{click:function(){t()}}},"查看")},e.editButton=function(t,e){return e("Button",{props:{type:"primary",icon:"edit",size:"small"},style:{marginRight:"5px"},on:{click:function(){t()}}},"编辑")}},864:function(t,e,a){var n=a(865);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(17)("7a67bbab",n,!1)},865:function(t,e,a){e=t.exports=a(16)(void 0),e.push([t.i,"\n.top {\n    margin-top: 15px\n}\n.pages {\n    text-align: right;\n    margin-top: 10px;\n    padding-right: 10px;\n}\n.form {\n    margin-right: 20px;\n}\n.be-inline-block {\n    /*display: inline-block;*/\n    /*line-height: 50px;*/\n    vertical-align: middle;\n}\n.button-warp{\n   /* margin-bottom: 15px;*/\n}\n.be-inline-block .btn{\n    margin-right: 15px;\n}\n.be-inline-block  .searth-input .ivu-input{\n    border-radius: 32px;\n}\n.demo-upload-list{\n    display: inline-block;\n    width: 60px;\n    height: 60px;\n    text-align: center;\n    line-height: 60px;\n    border: 1px solid transparent;\n    border-radius: 4px;\n    overflow: hidden;\n    background: #fff;\n    position: relative;\n    box-shadow: 0 1px 1px rgba(0,0,0,.2);\n    margin-right: 4px;\n}\n.demo-upload-list img{\n    width: 100%;\n    height: 100%;\n}\n",""])},866:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=a(87),r=n(o),i=a(86),s=(a(88),a(312),a(867)),l=n(s),d=a(870),u=n(d);e.default={name:"ad-edit-page",components:{carousel:l.default,singer:u.default},data:function(){return{adId:0,adSpace:[],adDisabled:!1,modelList:{carousel:!1,singer:!1},formData:{id:0,ad_space:0,title:"",url:"",url_type:0,cover_img:"",val:"",extend:"",sort:"",start_time:"",end_time:"",remarks:"",status:0}}},mounted:function(){this.getAdSpaces(),void 0!=this.$route.params.id&&(this.adId=parseInt(this.$route.params.id.toString()),this.adId>0&&this.getDataInfo(this.adId))},methods:{getAdSpaces:function(){var t=this,e={};(0,i.adSpaceGetAllsAction)(e).then(function(e){t.adSpace=e.data.list}).catch(function(t){console.log(t)})},getDataInfo:function(t){var e=this,a={id:t};(0,i.adGetAction)(a).then(function(t){e.formData=(0,r.default)({},e.formData,{id:t.data.info.id,ad_space:t.data.info.ad_space,title:t.data.info.title,url:t.data.info.url,url_type:t.data.info.url_type,cover_img:t.data.info.cover_img,val:t.data.info.val,extend:t.data.info.extend,sort:t.data.info.sort,start_time:t.data.info.start_time,end_time:t.data.info.end_time,remarks:t.data.info.remarks,status:t.data.info.status}),e.adDisabled=!0,e.$refs.carousel.$emit("init",e.formData),e.$refs.singer.$emit("init",e.formData)}).catch(function(t){console.log(t)})},onChange:function(){var t=this;if(""!=this.formData.ad_space){var e={id:this.formData.ad_space};(0,i.adSpaceGetAction)(e).then(function(e){for(var a in t.modelList)a==e.data.info.model?t.modelList[a]=!0:t.modelList[a]=!1}).catch(function(t){console.log(t)})}},handleSubmit:function(){var t=this,e=void 0;this.modelList.singer?e=this.$refs.singer.$emit("get-data"):this.modelList.carousel&&(e=this.$refs.carousel.$emit("get-data"));var a=(0,r.default)({},this.formData,e.formData);(0,i.adSaveAction)(a).then(function(e){t.$Message.info(e.data.msg)}).catch(function(t){console.log(t)})}},destroyed:function(){}}},867:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(868),o=a.n(n),r=a(869),i=a.n(r),s=a(1),l=s(o.a,i.a,!1,null,null,null);l.options.__file="src\\views\\ad\\model\\Carousel.vue",l.esModule&&Object.keys(l.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),e.default=l.exports},868:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(87),o=function(t){return t&&t.__esModule?t:{default:t}}(n),r=a(86),i=a(88);e.default={name:"carousel",data:function(){return{formData:{url_type:0,url:"",cover_img:""},uploadApiAction:r.uploadApiAction,defaultList:[],imgName:"",uploadList:[]}},mounted:function(){var t=this;this.$on("get-data",function(){return t.formData}),this.$on("init",function(t){this.formData=(0,o.default)({},{url_type:t.url_type,url:t.url,cover_img:t.cover_img}),""!=t.cover_img?(this.defaultList=[],this.defaultList=this.defaultList.concat([{name:"图片",url:i.base+t.cover_img,status:"finished"}]),this.uploadList=[(0,o.default)({},this.defaultList[0])]):this.uploadList=[]}),this.uploadList=this.$refs.upload.fileList},methods:{handleSuccess:function(t,e){e.url=i.base+t.data.info,e.name="图片",this.formData.cover_img=t.data.info,this.uploadList=[(0,o.default)({},e)]},handleFormatError:function(t){this.$Notice.warning({title:"格式",desc:"目前支持jpg、jpeg、png格式图片"})},handleMaxSize:function(t){this.$Notice.warning({title:"超出大小",desc:"最大为2M."})},handleBeforeUpload:function(){var t=this.uploadList.length<2;return t||this.$Notice.warning({title:"最多只能上传一张."}),t}},destroyed:function(){}}},869:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Form-item",{attrs:{label:"封面图",prop:"type"}},[[t._l(t.uploadList,function(e){return a("div",{staticClass:"demo-upload-list"},["finished"===e.status?[a("img",{attrs:{src:e.url}})]:[e.showProgress?a("Progress",{attrs:{percent:e.percentage,"hide-info":""}}):t._e()]],2)}),t._v(" "),a("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{"show-upload-list":!1,"default-file-list":t.defaultList,"on-success":t.handleSuccess,format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,"before-upload":t.handleBeforeUpload,type:"drag",action:t.uploadApiAction}},[a("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[a("Icon",{attrs:{type:"camera",size:"20"}})],1)])]],2),t._v(" "),a("FormItem",{attrs:{label:"跳转链接",prop:"url"}},[a("Input",{attrs:{placeholder:"请输入跳转链接"},model:{value:t.formData.url,callback:function(e){t.$set(t.formData,"url",e)},expression:"formData.url"}})],1),t._v(" "),a("FormItem",{attrs:{label:"跳转类型",prop:"ad_space"}},[a("Select",{model:{value:t.formData.url_type,callback:function(e){t.$set(t.formData,"url_type",e)},expression:"formData.url_type"}},[a("Option",{attrs:{value:0}},[t._v("HTTP")]),t._v(" "),a("Option",{attrs:{value:1}},[t._v("原生跳转")])],1)],1)],1)},o=[];n._withStripped=!0;var r={render:n,staticRenderFns:o};e.default=r},870:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(871),o=a.n(n),r=a(872),i=a.n(r),s=a(1),l=s(o.a,i.a,!1,null,null,null);l.options.__file="src\\views\\ad\\model\\Singer.vue",l.esModule&&Object.keys(l.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),e.default=l.exports},871:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(87),o=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default={name:"singer",data:function(){return{formData:{val:0}}},mounted:function(){var t=this;this.$on("get-data",function(){return t.formData}),this.$on("init",function(t){this.formData=(0,o.default)({},{val:t.val})})},methods:{},destroyed:function(){}}},872:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("FormItem",{attrs:{label:"歌手ID",prop:"val"}},[a("Input",{attrs:{placeholder:"请输入歌手ID"},model:{value:t.formData.val,callback:function(e){t.$set(t.formData,"val",e)},expression:"formData.val"}})],1)],1)},o=[];n._withStripped=!0;var r={render:n,staticRenderFns:o};e.default=r},873:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Row",{attrs:{gutter:10}},[a("Col",{attrs:{span:"24"}},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"pinpoint"}}),t._v("\r\n              广告编辑\r\n        ")],1),t._v(" "),a("Form",{ref:"formData",attrs:{model:t.formData,"label-width":80}},[a("FormItem",{attrs:{label:"广告位",prop:"ad_space"}},[a("Select",{attrs:{disabled:t.adDisabled},on:{"on-change":t.onChange},model:{value:t.formData.ad_space,callback:function(e){t.$set(t.formData,"ad_space",e)},expression:"formData.ad_space"}},t._l(t.adSpace,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.title))])}))],1),t._v(" "),a("FormItem",{attrs:{label:"标题",prop:"title"}},[a("Input",{attrs:{placeholder:"请输入广告标题"},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}})],1),t._v(" "),a("FormItem",{attrs:{label:"有效期"}},[a("Row",[a("Col",{attrs:{span:"3"}},[a("FormItem",{attrs:{prop:"date"}},[a("DatePicker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"开始"},model:{value:t.formData.start_time,callback:function(e){t.$set(t.formData,"start_time",e)},expression:"formData.start_time"}})],1)],1),t._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"1"}},[t._v("-")]),t._v(" "),a("Col",{attrs:{span:"3"}},[a("FormItem",{attrs:{prop:"time"}},[a("DatePicker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"结束"},model:{value:t.formData.end_time,callback:function(e){t.$set(t.formData,"end_time",e)},expression:"formData.end_time"}})],1)],1)],1)],1),t._v(" "),[a("carousel",{directives:[{name:"show",rawName:"v-show",value:t.modelList.carousel,expression:"modelList.carousel"}],ref:"carousel"}),t._v(" "),a("singer",{directives:[{name:"show",rawName:"v-show",value:t.modelList.singer,expression:"modelList.singer"}],ref:"singer"})],t._v(" "),a("FormItem",{attrs:{label:"状态",prop:"status"}},[a("Select",{model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},[a("Option",{attrs:{value:0}},[t._v("正常")]),t._v(" "),a("Option",{attrs:{value:1}},[t._v("冻结")])],1)],1),t._v(" "),a("FormItem",{attrs:{label:"备注",prop:"desc"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:10},placeholder:"备注"},model:{value:t.formData.remarks,callback:function(e){t.$set(t.formData,"remarks",e)},expression:"formData.remarks"}})],1),t._v(" "),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.handleSubmit()}}},[t._v("提交")])],1)],2)],1)],1)],1)},o=[];n._withStripped=!0;var r={render:n,staticRenderFns:o};e.default=r}});