webpackJsonp([17],{1023:function(t,e,n){var a=n(1024);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n(17)("77599f20",a,!1)},1024:function(t,e,n){e=t.exports=n(16)(void 0),e.push([t.i,"\n.pages {\n    text-align: right;\n    margin-top: 10px;\n    padding-right: 10px;\n}\n.demo-upload-list{\n    display: inline-block;\n    width: 60px;\n    height: 60px;\n    text-align: center;\n    line-height: 60px;\n    border: 1px solid transparent;\n    border-radius: 4px;\n    overflow: hidden;\n    background: #fff;\n    position: relative;\n    box-shadow: 0 1px 1px rgba(0,0,0,.2);\n    margin-right: 4px;\n}\n.demo-upload-list img{\n    width: 100%;\n    height: 100%;\n}\n\n",""])},1025:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(87),o=function(t){return t&&t.__esModule?t:{default:t}}(a),i=n(86),s=n(88),r=n(315);e.default={name:"country-list",data:function(){var t=this;return{tableTotal:20,current:1,loading:!0,modal:!1,title:"新增",columns:[{title:"编号",key:"id",width:100},{title:"名称",key:"name"},{title:"中文名称",key:"chinese_name"},{title:"英文名称",key:"english_name"},{title:"手机区号",key:"area_code"},{title:"图片",key:"logo",render:function(t,e){return""!=e.row.logo?t("Img",{attrs:{src:s.base+e.row.logo},style:{width:"100px","margin-top":"5px",height:"100px"}}):"null"}},{title:"状态",key:"status",render:function(t,e){return 0==e.row.status?"开放":t("Font",{style:{color:"red"}},"关闭")}},{title:"时间",key:"create_time",width:180},{title:"操作",key:"action",width:300,align:"center",render:function(e,n){return e("div",[(0,r.editButton)(function(){t.showCreate(n.row.id)},e),(0,r.deleteButton)(function(){t.remove(n.index,n.row.id)},e)])}}],data:[],country:{id:0,name:"",chinese_name:"",english_name:"",area_code:"",logo:"",status:0,sort:0},uploadApiAction:i.uploadApiAction,defaultList:[],imgName:"",uploadList:[]}},mounted:function(){this.getDataList(),this.uploadList=this.$refs.upload.fileList},methods:{ok:function(){var t=this,e=this.country;(0,i.countrySaveAction)(e).then(function(e){t.$Message.info(e.data.msg),t.getDataList()}).catch(function(t){this.$Message.info(response.data.msg)})},cancel:function(){},getDataList:function(){var t=this;this.loading=!0;var e={page:this.current};(0,i.countryListAction)(e).then(function(e){t.loading=!1,t.data=e.data.list,t.tableTotal=e.data.total,console.log(t.data)}).catch(function(t){console.log(t)})},changePage:function(t){console.log(t),this.current=t,this.data=this.getDataList()},showCreate:function(t){var e=this;if(this.modal=!0,t>0){this.title="更改";var n={id:t};(0,i.countryGetAction)(n).then(function(t){e.country=(0,o.default)({},e.country,{id:t.data.info.id,name:t.data.info.name,chinese_name:t.data.info.chinese_name,english_name:t.data.info.english_name,area_code:t.data.info.area_code,logo:t.data.info.logo,status:t.data.info.status,sort:t.data.info.sort}),""!=t.data.info.logo?(e.defaultList=[],e.defaultList=e.defaultList.concat([{name:"图片",url:s.base+t.data.info.logo,status:"finished"}]),e.uploadList=[(0,o.default)({},e.defaultList[0])]):e.uploadList=[]}).catch(function(t){console.log(t)})}else this.title="新增",this.country={}},remove:function(t,e){var n=this,a={id:e};(0,i.countryDelAction)(a).then(function(e){n.$Message.info(e.data.msg),n.data.splice(t,1)}).catch(function(t){this.$Message.info("网络异常，请稍候再试")})},handleSuccess:function(t,e){e.url=s.base+t.data.info,e.name="图片",this.country.logo=t.data.info,this.uploadList=[(0,o.default)({},e)]},handleFormatError:function(t){this.$Notice.warning({title:"格式",desc:"目前支持jpg、jpeg、png格式图片"})},handleMaxSize:function(t){this.$Notice.warning({title:"超出大小",desc:"最大为2M."})},handleBeforeUpload:function(){var t=this.uploadList.length<2;return t||this.$Notice.warning({title:"最多只能上传一张."}),t}}}},1026:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Row",{attrs:{gutter:10}},[n("Col",{attrs:{span:"24"}},[n("Card",[n("p",{attrs:{slot:"title"},slot:"title"},[n("Icon",{attrs:{type:"pinpoint"}}),t._v("\n                国家列表\n          ")],1),t._v(" "),n("Row",[n("Col",{attrs:{span:"16"}},[n("Row",{staticStyle:{"margin-bottom":"15px"},attrs:{justify:"center",align:"bottom"}},[n("Col",{attrs:{span:"3"}},[n("Button",{staticClass:"btn",attrs:{type:"primary",shape:"circle",icon:"plus-round"},on:{click:function(e){t.showCreate()}}},[t._v("新增")])],1)],1)],1)],1),t._v(" "),n("Row",[n("Col",{staticClass:"main-inner-content",attrs:{span:"24"}},[n("Table",{attrs:{stripe:"",columns:t.columns,data:t.data}})],1)],1),t._v(" "),n("Row",[n("Col",{staticClass:"pages",attrs:{span:"24"}},[n("Page",{attrs:{total:t.tableTotal,"page-size":20,current:1,"show-elevator":""},on:{"on-change":t.changePage}})],1)],1)],1)],1),t._v(" "),n("Modal",{attrs:{"mask-closable":!1,title:t.title},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[n("Form",{ref:"country",staticClass:"form",attrs:{model:t.country,"label-width":80}},[n("Form-item",{attrs:{label:"名称",prop:"name"}},[n("Input",{attrs:{placeholder:"请输入名称"},model:{value:t.country.name,callback:function(e){t.$set(t.country,"name",e)},expression:"country.name"}})],1),t._v(" "),n("Form-item",{attrs:{label:"国旗",prop:"type"}},[[t._l(t.uploadList,function(e){return n("div",{staticClass:"demo-upload-list"},["finished"===e.status?[n("img",{attrs:{src:e.url}})]:[e.showProgress?n("Progress",{attrs:{percent:e.percentage,"hide-info":""}}):t._e()]],2)}),t._v(" "),n("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{"show-upload-list":!1,"default-file-list":t.defaultList,"on-success":t.handleSuccess,format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,"before-upload":t.handleBeforeUpload,type:"drag",action:t.uploadApiAction}},[n("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[n("Icon",{attrs:{type:"camera",size:"20"}})],1)])]],2),t._v(" "),n("Form-item",{attrs:{label:"中文名称",prop:"chinese_name"}},[n("Input",{attrs:{placeholder:"请输入中文名称"},model:{value:t.country.chinese_name,callback:function(e){t.$set(t.country,"chinese_name",e)},expression:"country.chinese_name"}})],1),t._v(" "),n("Form-item",{attrs:{label:"英文名称",prop:"english_name"}},[n("Input",{attrs:{placeholder:"请输入英文名称"},model:{value:t.country.english_name,callback:function(e){t.$set(t.country,"english_name",e)},expression:"country.english_name"}})],1),t._v(" "),n("Form-item",{attrs:{label:"手机区号",prop:"area_code"}},[n("Input",{attrs:{placeholder:"请输入手机区号"},model:{value:t.country.area_code,callback:function(e){t.$set(t.country,"area_code",e)},expression:"country.area_code"}})],1),t._v(" "),n("Form-item",{attrs:{label:"排序",prop:"sort"}},[n("Input",{attrs:{placeholder:"数字越大越靠前"},model:{value:t.country.sort,callback:function(e){t.$set(t.country,"sort",e)},expression:"country.sort"}})],1),t._v(" "),n("Form-item",{attrs:{label:"状态",prop:"type"}},[n("Select",{model:{value:t.country.status,callback:function(e){t.$set(t.country,"status",e)},expression:"country.status"}},[n("Option",{attrs:{value:0}},[t._v("开放")]),t._v(" "),n("Option",{attrs:{value:1}},[t._v("关闭")])],1)],1)],1)],1)],1)},o=[];a._withStripped=!0;var i={render:a,staticRenderFns:o};e.default=i},297:function(t,e,n){"use strict";function a(t){l||n(1023)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1025),i=n.n(o),s=n(1026),r=n.n(s),l=!1,c=n(1),u=a,d=c(i.a,r.a,!1,u,null,null);d.options.__file="src\\views\\system\\CountryList.vue",d.esModule&&Object.keys(d.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),e.default=d.exports},315:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.deleteButton=function(t,e){return e("Poptip",{props:{confirm:!0,title:"您确定要删除这条数据吗?",transfer:!0},on:{"on-ok":function(){t()}}},[e("Button",{style:{margin:"0 5px"},props:{type:"error",placement:"top",size:"small",icon:"trash-a"}},"删除")])},e.detailsButton=function(t,e){return e("Button",{props:{type:"primary",icon:"ios-eye-outline",size:"small"},style:{marginRight:"5px"},on:{click:function(){t()}}},"查看")},e.editButton=function(t,e){return e("Button",{props:{type:"primary",icon:"edit",size:"small"},style:{marginRight:"5px"},on:{click:function(){t()}}},"编辑")}}});